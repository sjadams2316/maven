# 2026-02-13 — Daily Notes

## Morning Session

### Pantheon Bug Investigation
- Sam asked about bugs found during "Project Pantheon" at 9pm (Feb 12)
- Searched memory: Feb 12 notes showed evening session activities (DeepSeek R1, Qwen3, Founder Architecture Refactor, Oracle personality updates) but no specific "Pantheon unleashed" record
- Sam clarified: "Remember I said to fix portfolio lab bug as an example. And then I mentioned to fix all other bugs as well."

### Portfolio Lab Demo Bug — FIXED ✅
**Bug:** Demo users saw $0 in Portfolio Lab instead of $800K sample portfolio

**Root Cause:** `/api/user/profile` requires Clerk auth; demo users (cookie auth only) get 401 → no holdings data

**Fix Applied:** Updated `/api/user/profile/route.ts`:
- GET: Returns `DEMO_PROFILE` if demo mode enabled
- POST: Returns 403 (demo mode is read-only)

**Files Modified:**
- `maven/apps/dashboard/src/app/api/user/profile/route.ts`
- `memory/pantheon/bugs/2026-02-12-portfolio-lab-demo-bug.md` (status updated to FIXED)

**Verification Needed:** Deploy to Vercel, test demo flow

### Overnight Cron Jobs
- Market Data Cache Warmer: Running every 5 minutes, all assets cached
- Maven Daily Research: Completed Fixed Income + Estate Planning deep dives (~35KB of docs)
- System Health Checks: Running at 4:02, 5:02, 5:32 AM EST

## Research Completed (Overnight)
- **Fixed Income Deep Dive:** Tax-efficient bonds, muni vs Treasury, bond ladders
- **Estate & Gift Basics:** 2026 exemption ($15M lifetime, $19K annual), state estate taxes
- **Key Alpha:** 4% CA muni = 8.18% taxable yield for 37% bracket; OBBGA made $15M exemption permanent

## Pending Tasks
- [ ] Verify demo mode works end-to-end (Portfolio Lab fix deployed)
- [ ] Test Oracle context fix (John bug)
- [ ] Client page upgrade: real data sync, timeline, action tracking, document vault, meeting hub, goals tracker
- [ ] Oracle improvements: client-specific memory, insight chips, voice notes
- [ ] Oracle in main advisor dashboard - verify visible and working

## New Feature: Advisor Oracle (Built Feb 13)
- Created `AdvisorOracle.tsx` component
- Integrated into client detail page (`/advisor/clients/[id]`)
- Features:
  - Client context awareness (holdings, allocation, risk tolerance, notes)
  - 8 quick action buttons: Analyze, Meeting Prep, Tax Opportunities, Stress Test, Rebalance, Reallocate, Key Insights, Interview Questions
  - Floating panel with chat interface
  - Passes full client data to Oracle API for context-aware responses

### Oracle Context Bug (Found & Fixed Feb 13)
**Bug:** Oracle thought John was a young investor starting out despite showing age 58, $800K net worth
**Root Cause:** Context was sent as formatted string to API, but API expected structured object
**Fix:** Updated AdvisorOracle to send structured context object with age calculated from dateOfBirth, holdings, allocation, accounts

### Added Oracle to Main Advisor Dashboard (Feb 13)
- Button in header opens Oracle as research assistant (no client context needed)
- Can ask general market/financial research questions
- When viewing a client, Oracle knows their full context

### Oracle as Primary Tab (Feb 13)
- Oracle is now a primary "Research" tab in advisor dashboard (not hidden button)
- Full-width Oracle view when tab is selected
- Removed Clerk dependency so it works with just password gate
- Demo users can now access Oracle (password: BanksNavy10)

### Client Page Feedback (Feb 13)
Sam identified issues:
- Data not syncing properly
- Oracle ignoring client context (FIXED - context now sent as structured object)
Needs: Real data sync, client timeline, action tracking, document vault, meeting hub, goals tracker

---
